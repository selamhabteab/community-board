{"ast":null,"code":"import { R as RequestHandler, h as cleanUrl, i as getSearchParams, d as devUtils, m as matchRequestUrl, g as getPublicUrlFromRequest, j as prepareRequest, k as prepareResponse, n as getStatusCodeColor, o as getTimestamp } from './RequestHandler-deps.js';\nimport { b as set, s as status, d as cookie, g as json, e as delay, f as fetch } from './fetch-deps.js';\nimport { b as body, t as text, x as xml } from './xml-deps.js';\n/**\r\n * Performs a case-insensitive comparison of two given strings.\r\n */\n\nfunction isStringEqual(actual, expected) {\n  return actual.toLowerCase() === expected.toLowerCase();\n}\n\nvar RESTMethods;\n\n(function (RESTMethods) {\n  RESTMethods[\"HEAD\"] = \"HEAD\";\n  RESTMethods[\"GET\"] = \"GET\";\n  RESTMethods[\"POST\"] = \"POST\";\n  RESTMethods[\"PUT\"] = \"PUT\";\n  RESTMethods[\"PATCH\"] = \"PATCH\";\n  RESTMethods[\"OPTIONS\"] = \"OPTIONS\";\n  RESTMethods[\"DELETE\"] = \"DELETE\";\n})(RESTMethods || (RESTMethods = {}));\n\nconst restContext = {\n  set,\n  status,\n  cookie,\n  body,\n  text,\n  json,\n  xml,\n  delay,\n  fetch\n};\n/**\r\n * Request handler for REST API requests.\r\n * Provides request matching based on method and URL.\r\n */\n\nclass RestHandler extends RequestHandler {\n  constructor(method, path, resolver) {\n    super({\n      info: {\n        header: `${method} ${path}`,\n        path,\n        method\n      },\n      ctx: restContext,\n      resolver\n    });\n    this.checkRedundantQueryParameters();\n  }\n\n  checkRedundantQueryParameters() {\n    const {\n      method,\n      path\n    } = this.info;\n\n    if (path instanceof RegExp) {\n      return;\n    }\n\n    const url = cleanUrl(path); // Bypass request handler URLs that have no redundant characters.\n\n    if (url === path) {\n      return;\n    }\n\n    const searchParams = getSearchParams(path);\n    const queryParams = [];\n    searchParams.forEach((_, paramName) => {\n      queryParams.push(paramName);\n    });\n    devUtils.warn(`\\\nFound a redundant usage of query parameters in the request handler URL for \"${method} ${path}\". Please match against a path instead, and access query parameters in the response resolver function:\n\nrest.${method.toLowerCase()}(\"${url}\", (req, res, ctx) => {\n  const query = req.url.searchParams\n${queryParams.map(paramName => `\\\n  const ${paramName} = query.get(\"${paramName}\")`).join('\\n')}\n})\\\n      `);\n  }\n\n  parse(request, resolutionContext) {\n    return matchRequestUrl(request.url, this.info.path, resolutionContext === null || resolutionContext === void 0 ? void 0 : resolutionContext.baseUrl);\n  }\n\n  getPublicRequest(request, parsedResult) {\n    return Object.assign(Object.assign({}, request), {\n      params: parsedResult.params || {}\n    });\n  }\n\n  predicate(request, parsedResult) {\n    return isStringEqual(this.info.method, request.method) && parsedResult.matches;\n  }\n\n  log(request, response) {\n    const publicUrl = getPublicUrlFromRequest(request);\n    const loggedRequest = prepareRequest(request);\n    const loggedResponse = prepareResponse(response);\n    const statusColor = getStatusCodeColor(response.status);\n    console.groupCollapsed(devUtils.formatMessage('%s %s %s (%c%s%c)'), getTimestamp(), request.method, publicUrl, `color:${statusColor}`, `${response.status} ${response.statusText}`, 'color:inherit');\n    console.log('Request', loggedRequest);\n    console.log('Handler:', {\n      mask: this.info.path,\n      resolver: this.resolver\n    });\n    console.log('Response', loggedResponse);\n    console.groupEnd();\n  }\n\n}\n\nfunction createRestHandler(method) {\n  return (path, resolver) => {\n    return new RestHandler(method, path, resolver);\n  };\n}\n\nconst rest = {\n  head: createRestHandler(RESTMethods.HEAD),\n  get: createRestHandler(RESTMethods.GET),\n  post: createRestHandler(RESTMethods.POST),\n  put: createRestHandler(RESTMethods.PUT),\n  delete: createRestHandler(RESTMethods.DELETE),\n  patch: createRestHandler(RESTMethods.PATCH),\n  options: createRestHandler(RESTMethods.OPTIONS)\n};\nexport { RestHandler as R, RESTMethods as a, restContext as b, isStringEqual as i, rest as r };","map":{"version":3,"sources":["/Users/selamhabteab/Desktop/Projects/redux/community-board/node_modules/msw/lib/esm/rest-deps.js"],"names":["R","RequestHandler","h","cleanUrl","i","getSearchParams","d","devUtils","m","matchRequestUrl","g","getPublicUrlFromRequest","j","prepareRequest","k","prepareResponse","n","getStatusCodeColor","o","getTimestamp","b","set","s","status","cookie","json","e","delay","f","fetch","body","t","text","x","xml","isStringEqual","actual","expected","toLowerCase","RESTMethods","restContext","RestHandler","constructor","method","path","resolver","info","header","ctx","checkRedundantQueryParameters","RegExp","url","searchParams","queryParams","forEach","_","paramName","push","warn","map","join","parse","request","resolutionContext","baseUrl","getPublicRequest","parsedResult","Object","assign","params","predicate","matches","log","response","publicUrl","loggedRequest","loggedResponse","statusColor","console","groupCollapsed","formatMessage","statusText","mask","groupEnd","createRestHandler","rest","head","HEAD","get","GET","post","POST","put","PUT","delete","DELETE","patch","PATCH","options","OPTIONS","a","r"],"mappings":"AAAA,SAASA,CAAC,IAAIC,cAAd,EAA8BC,CAAC,IAAIC,QAAnC,EAA6CC,CAAC,IAAIC,eAAlD,EAAmEC,CAAC,IAAIC,QAAxE,EAAkFC,CAAC,IAAIC,eAAvF,EAAwGC,CAAC,IAAIC,uBAA7G,EAAsIC,CAAC,IAAIC,cAA3I,EAA2JC,CAAC,IAAIC,eAAhK,EAAiLC,CAAC,IAAIC,kBAAtL,EAA0MC,CAAC,IAAIC,YAA/M,QAAmO,0BAAnO;AACA,SAASC,CAAC,IAAIC,GAAd,EAAmBC,CAAC,IAAIC,MAAxB,EAAgCjB,CAAC,IAAIkB,MAArC,EAA6Cd,CAAC,IAAIe,IAAlD,EAAwDC,CAAC,IAAIC,KAA7D,EAAoEC,CAAC,IAAIC,KAAzE,QAAsF,iBAAtF;AACA,SAAST,CAAC,IAAIU,IAAd,EAAoBC,CAAC,IAAIC,IAAzB,EAA+BC,CAAC,IAAIC,GAApC,QAA+C,eAA/C;AAEA;AACA;AACA;;AACA,SAASC,aAAT,CAAuBC,MAAvB,EAA+BC,QAA/B,EAAyC;AACrC,SAAOD,MAAM,CAACE,WAAP,OAAyBD,QAAQ,CAACC,WAAT,EAAhC;AACH;;AAED,IAAIC,WAAJ;;AACA,CAAC,UAAUA,WAAV,EAAuB;AACpBA,EAAAA,WAAW,CAAC,MAAD,CAAX,GAAsB,MAAtB;AACAA,EAAAA,WAAW,CAAC,KAAD,CAAX,GAAqB,KAArB;AACAA,EAAAA,WAAW,CAAC,MAAD,CAAX,GAAsB,MAAtB;AACAA,EAAAA,WAAW,CAAC,KAAD,CAAX,GAAqB,KAArB;AACAA,EAAAA,WAAW,CAAC,OAAD,CAAX,GAAuB,OAAvB;AACAA,EAAAA,WAAW,CAAC,SAAD,CAAX,GAAyB,SAAzB;AACAA,EAAAA,WAAW,CAAC,QAAD,CAAX,GAAwB,QAAxB;AACH,CARD,EAQGA,WAAW,KAAKA,WAAW,GAAG,EAAnB,CARd;;AASA,MAAMC,WAAW,GAAG;AAChBnB,EAAAA,GADgB;AAEhBE,EAAAA,MAFgB;AAGhBC,EAAAA,MAHgB;AAIhBM,EAAAA,IAJgB;AAKhBE,EAAAA,IALgB;AAMhBP,EAAAA,IANgB;AAOhBS,EAAAA,GAPgB;AAQhBP,EAAAA,KARgB;AAShBE,EAAAA;AATgB,CAApB;AAWA;AACA;AACA;AACA;;AACA,MAAMY,WAAN,SAA0BxC,cAA1B,CAAyC;AACrCyC,EAAAA,WAAW,CAACC,MAAD,EAASC,IAAT,EAAeC,QAAf,EAAyB;AAChC,UAAM;AACFC,MAAAA,IAAI,EAAE;AACFC,QAAAA,MAAM,EAAG,GAAEJ,MAAO,IAAGC,IAAK,EADxB;AAEFA,QAAAA,IAFE;AAGFD,QAAAA;AAHE,OADJ;AAMFK,MAAAA,GAAG,EAAER,WANH;AAOFK,MAAAA;AAPE,KAAN;AASA,SAAKI,6BAAL;AACH;;AACDA,EAAAA,6BAA6B,GAAG;AAC5B,UAAM;AAAEN,MAAAA,MAAF;AAAUC,MAAAA;AAAV,QAAmB,KAAKE,IAA9B;;AACA,QAAIF,IAAI,YAAYM,MAApB,EAA4B;AACxB;AACH;;AACD,UAAMC,GAAG,GAAGhD,QAAQ,CAACyC,IAAD,CAApB,CAL4B,CAM5B;;AACA,QAAIO,GAAG,KAAKP,IAAZ,EAAkB;AACd;AACH;;AACD,UAAMQ,YAAY,GAAG/C,eAAe,CAACuC,IAAD,CAApC;AACA,UAAMS,WAAW,GAAG,EAApB;AACAD,IAAAA,YAAY,CAACE,OAAb,CAAqB,CAACC,CAAD,EAAIC,SAAJ,KAAkB;AACnCH,MAAAA,WAAW,CAACI,IAAZ,CAAiBD,SAAjB;AACH,KAFD;AAGAjD,IAAAA,QAAQ,CAACmD,IAAT,CAAe;AACvB,8EAA8Ef,MAAO,IAAGC,IAAK;AAC7F;AACA,OAAOD,MAAM,CAACL,WAAP,EAAqB,KAAIa,GAAI;AACpC;AACA,EAAEE,WAAW,CACAM,GADX,CACgBH,SAAD,IAAgB;AACjC,UAAUA,SAAU,iBAAgBA,SAAU,IAF5C,EAGWI,IAHX,CAGgB,IAHhB,CAGsB;AACxB;AACA,OAVQ;AAWH;;AACDC,EAAAA,KAAK,CAACC,OAAD,EAAUC,iBAAV,EAA6B;AAC9B,WAAOtD,eAAe,CAACqD,OAAO,CAACX,GAAT,EAAc,KAAKL,IAAL,CAAUF,IAAxB,EAA8BmB,iBAAiB,KAAK,IAAtB,IAA8BA,iBAAiB,KAAK,KAAK,CAAzD,GAA6D,KAAK,CAAlE,GAAsEA,iBAAiB,CAACC,OAAtH,CAAtB;AACH;;AACDC,EAAAA,gBAAgB,CAACH,OAAD,EAAUI,YAAV,EAAwB;AACpC,WAAOC,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBN,OAAlB,CAAd,EAA0C;AAAEO,MAAAA,MAAM,EAAEH,YAAY,CAACG,MAAb,IAAuB;AAAjC,KAA1C,CAAP;AACH;;AACDC,EAAAA,SAAS,CAACR,OAAD,EAAUI,YAAV,EAAwB;AAC7B,WAAQ/B,aAAa,CAAC,KAAKW,IAAL,CAAUH,MAAX,EAAmBmB,OAAO,CAACnB,MAA3B,CAAb,IAAmDuB,YAAY,CAACK,OAAxE;AACH;;AACDC,EAAAA,GAAG,CAACV,OAAD,EAAUW,QAAV,EAAoB;AACnB,UAAMC,SAAS,GAAG/D,uBAAuB,CAACmD,OAAD,CAAzC;AACA,UAAMa,aAAa,GAAG9D,cAAc,CAACiD,OAAD,CAApC;AACA,UAAMc,cAAc,GAAG7D,eAAe,CAAC0D,QAAD,CAAtC;AACA,UAAMI,WAAW,GAAG5D,kBAAkB,CAACwD,QAAQ,CAAClD,MAAV,CAAtC;AACAuD,IAAAA,OAAO,CAACC,cAAR,CAAuBxE,QAAQ,CAACyE,aAAT,CAAuB,mBAAvB,CAAvB,EAAoE7D,YAAY,EAAhF,EAAoF2C,OAAO,CAACnB,MAA5F,EAAoG+B,SAApG,EAAgH,SAAQG,WAAY,EAApI,EAAwI,GAAEJ,QAAQ,CAAClD,MAAO,IAAGkD,QAAQ,CAACQ,UAAW,EAAjL,EAAoL,eAApL;AACAH,IAAAA,OAAO,CAACN,GAAR,CAAY,SAAZ,EAAuBG,aAAvB;AACAG,IAAAA,OAAO,CAACN,GAAR,CAAY,UAAZ,EAAwB;AACpBU,MAAAA,IAAI,EAAE,KAAKpC,IAAL,CAAUF,IADI;AAEpBC,MAAAA,QAAQ,EAAE,KAAKA;AAFK,KAAxB;AAIAiC,IAAAA,OAAO,CAACN,GAAR,CAAY,UAAZ,EAAwBI,cAAxB;AACAE,IAAAA,OAAO,CAACK,QAAR;AACH;;AA9DoC;;AAiEzC,SAASC,iBAAT,CAA2BzC,MAA3B,EAAmC;AAC/B,SAAO,CAACC,IAAD,EAAOC,QAAP,KAAoB;AACvB,WAAO,IAAIJ,WAAJ,CAAgBE,MAAhB,EAAwBC,IAAxB,EAA8BC,QAA9B,CAAP;AACH,GAFD;AAGH;;AACD,MAAMwC,IAAI,GAAG;AACTC,EAAAA,IAAI,EAAEF,iBAAiB,CAAC7C,WAAW,CAACgD,IAAb,CADd;AAETC,EAAAA,GAAG,EAAEJ,iBAAiB,CAAC7C,WAAW,CAACkD,GAAb,CAFb;AAGTC,EAAAA,IAAI,EAAEN,iBAAiB,CAAC7C,WAAW,CAACoD,IAAb,CAHd;AAITC,EAAAA,GAAG,EAAER,iBAAiB,CAAC7C,WAAW,CAACsD,GAAb,CAJb;AAKTC,EAAAA,MAAM,EAAEV,iBAAiB,CAAC7C,WAAW,CAACwD,MAAb,CALhB;AAMTC,EAAAA,KAAK,EAAEZ,iBAAiB,CAAC7C,WAAW,CAAC0D,KAAb,CANf;AAOTC,EAAAA,OAAO,EAAEd,iBAAiB,CAAC7C,WAAW,CAAC4D,OAAb;AAPjB,CAAb;AAUA,SAAS1D,WAAW,IAAIzC,CAAxB,EAA2BuC,WAAW,IAAI6D,CAA1C,EAA6C5D,WAAW,IAAIpB,CAA5D,EAA+De,aAAa,IAAI/B,CAAhF,EAAmFiF,IAAI,IAAIgB,CAA3F","sourcesContent":["import { R as RequestHandler, h as cleanUrl, i as getSearchParams, d as devUtils, m as matchRequestUrl, g as getPublicUrlFromRequest, j as prepareRequest, k as prepareResponse, n as getStatusCodeColor, o as getTimestamp } from './RequestHandler-deps.js';\nimport { b as set, s as status, d as cookie, g as json, e as delay, f as fetch } from './fetch-deps.js';\nimport { b as body, t as text, x as xml } from './xml-deps.js';\n\n/**\r\n * Performs a case-insensitive comparison of two given strings.\r\n */\r\nfunction isStringEqual(actual, expected) {\r\n    return actual.toLowerCase() === expected.toLowerCase();\r\n}\n\nvar RESTMethods;\r\n(function (RESTMethods) {\r\n    RESTMethods[\"HEAD\"] = \"HEAD\";\r\n    RESTMethods[\"GET\"] = \"GET\";\r\n    RESTMethods[\"POST\"] = \"POST\";\r\n    RESTMethods[\"PUT\"] = \"PUT\";\r\n    RESTMethods[\"PATCH\"] = \"PATCH\";\r\n    RESTMethods[\"OPTIONS\"] = \"OPTIONS\";\r\n    RESTMethods[\"DELETE\"] = \"DELETE\";\r\n})(RESTMethods || (RESTMethods = {}));\r\nconst restContext = {\r\n    set,\r\n    status,\r\n    cookie,\r\n    body,\r\n    text,\r\n    json,\r\n    xml,\r\n    delay,\r\n    fetch,\r\n};\r\n/**\r\n * Request handler for REST API requests.\r\n * Provides request matching based on method and URL.\r\n */\r\nclass RestHandler extends RequestHandler {\r\n    constructor(method, path, resolver) {\r\n        super({\r\n            info: {\r\n                header: `${method} ${path}`,\r\n                path,\r\n                method,\r\n            },\r\n            ctx: restContext,\r\n            resolver,\r\n        });\r\n        this.checkRedundantQueryParameters();\r\n    }\r\n    checkRedundantQueryParameters() {\r\n        const { method, path } = this.info;\r\n        if (path instanceof RegExp) {\r\n            return;\r\n        }\r\n        const url = cleanUrl(path);\r\n        // Bypass request handler URLs that have no redundant characters.\r\n        if (url === path) {\r\n            return;\r\n        }\r\n        const searchParams = getSearchParams(path);\r\n        const queryParams = [];\r\n        searchParams.forEach((_, paramName) => {\r\n            queryParams.push(paramName);\r\n        });\r\n        devUtils.warn(`\\\nFound a redundant usage of query parameters in the request handler URL for \"${method} ${path}\". Please match against a path instead, and access query parameters in the response resolver function:\n\nrest.${method.toLowerCase()}(\"${url}\", (req, res, ctx) => {\n  const query = req.url.searchParams\n${queryParams\r\n            .map((paramName) => `\\\n  const ${paramName} = query.get(\"${paramName}\")`)\r\n            .join('\\n')}\n})\\\n      `);\r\n    }\r\n    parse(request, resolutionContext) {\r\n        return matchRequestUrl(request.url, this.info.path, resolutionContext === null || resolutionContext === void 0 ? void 0 : resolutionContext.baseUrl);\r\n    }\r\n    getPublicRequest(request, parsedResult) {\r\n        return Object.assign(Object.assign({}, request), { params: parsedResult.params || {} });\r\n    }\r\n    predicate(request, parsedResult) {\r\n        return (isStringEqual(this.info.method, request.method) && parsedResult.matches);\r\n    }\r\n    log(request, response) {\r\n        const publicUrl = getPublicUrlFromRequest(request);\r\n        const loggedRequest = prepareRequest(request);\r\n        const loggedResponse = prepareResponse(response);\r\n        const statusColor = getStatusCodeColor(response.status);\r\n        console.groupCollapsed(devUtils.formatMessage('%s %s %s (%c%s%c)'), getTimestamp(), request.method, publicUrl, `color:${statusColor}`, `${response.status} ${response.statusText}`, 'color:inherit');\r\n        console.log('Request', loggedRequest);\r\n        console.log('Handler:', {\r\n            mask: this.info.path,\r\n            resolver: this.resolver,\r\n        });\r\n        console.log('Response', loggedResponse);\r\n        console.groupEnd();\r\n    }\r\n}\n\nfunction createRestHandler(method) {\r\n    return (path, resolver) => {\r\n        return new RestHandler(method, path, resolver);\r\n    };\r\n}\r\nconst rest = {\r\n    head: createRestHandler(RESTMethods.HEAD),\r\n    get: createRestHandler(RESTMethods.GET),\r\n    post: createRestHandler(RESTMethods.POST),\r\n    put: createRestHandler(RESTMethods.PUT),\r\n    delete: createRestHandler(RESTMethods.DELETE),\r\n    patch: createRestHandler(RESTMethods.PATCH),\r\n    options: createRestHandler(RESTMethods.OPTIONS),\r\n};\n\nexport { RestHandler as R, RESTMethods as a, restContext as b, isStringEqual as i, rest as r };\n"]},"metadata":{},"sourceType":"module"}