{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.createModel = void 0;\n\nvar debug_1 = require(\"debug\");\n\nvar glossary_1 = require(\"../glossary\");\n\nvar defineRelationalProperties_1 = require(\"./defineRelationalProperties\");\n\nvar log = debug_1.debug('createModel');\n\nfunction createModel(modelName, definition, parsedModel, initialValues, db) {\n  var _a;\n\n  var primaryKey = parsedModel.primaryKey,\n      properties = parsedModel.properties,\n      relations = parsedModel.relations;\n  log(\"creating a \\\"\" + modelName + \"\\\" entity (primary key: \\\"\" + primaryKey + \"\\\")\", definition, parsedModel, relations, initialValues);\n  var internalProperties = (_a = {}, _a[glossary_1.InternalEntityProperty.type] = modelName, _a[glossary_1.InternalEntityProperty.primaryKey] = primaryKey, _a);\n  var resolvedProperties = properties.reduce(function (entity, property) {\n    var exactValue = initialValues[property];\n    var propertyDefinition = definition[property];\n    log(\"property definition for \\\"\" + modelName + \".\" + property + \"\\\"\", propertyDefinition); // Ignore relational properties at this stage.\n\n    if ('kind' in propertyDefinition) {\n      return entity;\n    }\n\n    if ('isPrimaryKey' in propertyDefinition) {\n      entity[property] = exactValue || propertyDefinition.getValue();\n      return entity;\n    }\n\n    if (typeof exactValue === 'string' || typeof exactValue === 'number' || typeof exactValue === 'boolean' || (exactValue === null || exactValue === void 0 ? void 0 : exactValue.constructor.name) === 'Date') {\n      log(\"\\\"\" + modelName + \".\" + property + \"\\\" has a plain initial value:\", exactValue);\n      entity[property] = exactValue;\n      return entity;\n    }\n\n    entity[property] = propertyDefinition();\n    return entity;\n  }, {});\n  var entity = Object.assign({}, resolvedProperties, internalProperties);\n  defineRelationalProperties_1.defineRelationalProperties(entity, initialValues, relations, db);\n  log(\"created \\\"\" + modelName + \"\\\" entity\", entity);\n  return entity;\n}\n\nexports.createModel = createModel;","map":{"version":3,"sources":["/Users/selamhabteab/Desktop/Projects/redux/redux-essentials-example-app/node_modules/@mswjs/data/lib/model/createModel.js"],"names":["exports","__esModule","createModel","debug_1","require","glossary_1","defineRelationalProperties_1","log","debug","modelName","definition","parsedModel","initialValues","db","_a","primaryKey","properties","relations","internalProperties","InternalEntityProperty","type","resolvedProperties","reduce","entity","property","exactValue","propertyDefinition","getValue","constructor","name","Object","assign","defineRelationalProperties"],"mappings":"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","sourcesContent":["\"use strict\";\nexports.__esModule = true;\nexports.createModel = void 0;\nvar debug_1 = require(\"debug\");\nvar glossary_1 = require(\"../glossary\");\nvar defineRelationalProperties_1 = require(\"./defineRelationalProperties\");\nvar log = debug_1.debug('createModel');\nfunction createModel(modelName, definition, parsedModel, initialValues, db) {\n    var _a;\n    var primaryKey = parsedModel.primaryKey, properties = parsedModel.properties, relations = parsedModel.relations;\n    log(\"creating a \\\"\" + modelName + \"\\\" entity (primary key: \\\"\" + primaryKey + \"\\\")\", definition, parsedModel, relations, initialValues);\n    var internalProperties = (_a = {},\n        _a[glossary_1.InternalEntityProperty.type] = modelName,\n        _a[glossary_1.InternalEntityProperty.primaryKey] = primaryKey,\n        _a);\n    var resolvedProperties = properties.reduce(function (entity, property) {\n        var exactValue = initialValues[property];\n        var propertyDefinition = definition[property];\n        log(\"property definition for \\\"\" + modelName + \".\" + property + \"\\\"\", propertyDefinition);\n        // Ignore relational properties at this stage.\n        if ('kind' in propertyDefinition) {\n            return entity;\n        }\n        if ('isPrimaryKey' in propertyDefinition) {\n            entity[property] = exactValue || propertyDefinition.getValue();\n            return entity;\n        }\n        if (typeof exactValue === 'string' ||\n            typeof exactValue === 'number' ||\n            typeof exactValue === 'boolean' ||\n            (exactValue === null || exactValue === void 0 ? void 0 : exactValue.constructor.name) === 'Date') {\n            log(\"\\\"\" + modelName + \".\" + property + \"\\\" has a plain initial value:\", exactValue);\n            entity[property] = exactValue;\n            return entity;\n        }\n        entity[property] = propertyDefinition();\n        return entity;\n    }, {});\n    var entity = Object.assign({}, resolvedProperties, internalProperties);\n    defineRelationalProperties_1.defineRelationalProperties(entity, initialValues, relations, db);\n    log(\"created \\\"\" + modelName + \"\\\" entity\", entity);\n    return entity;\n}\nexports.createModel = createModel;\n"]},"metadata":{},"sourceType":"script"}