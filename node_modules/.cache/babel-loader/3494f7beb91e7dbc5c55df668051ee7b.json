{"ast":null,"code":"import { c as commonjsGlobal, l as lib$1, j as jsonParse, s as status, b as set, e as delay, f as fetch } from './fetch-deps.js';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nvar lib = {};\nvar invariant$1 = {};\nvar format$1 = {};\nObject.defineProperty(format$1, \"__esModule\", {\n  value: true\n});\nformat$1.format = void 0;\nvar POSITIONALS_EXP = /(%?)(%([sdjo]))/g;\n\nfunction serializePositional(positional, flag) {\n  switch (flag) {\n    // Strings.\n    case 's':\n      return positional;\n    // Digits.\n\n    case 'd':\n    case 'i':\n      return Number(positional);\n    // JSON.\n\n    case 'j':\n      return JSON.stringify(positional);\n    // Objects.\n\n    case 'o':\n      {\n        // Preserve stings to prevent extra quotes around them.\n        if (typeof positional === 'string') {\n          return positional;\n        }\n\n        var json = JSON.stringify(positional); // If the positional isn't serializable, return it as-is.\n\n        if (json === '{}' || json === '[]' || /^\\[object .+?\\]$/.test(json)) {\n          return positional;\n        }\n\n        return json;\n      }\n  }\n}\n\nfunction format(message) {\n  var positionals = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    positionals[_i - 1] = arguments[_i];\n  }\n\n  if (positionals.length === 0) {\n    return message;\n  }\n\n  var positionalIndex = 0;\n  var formattedMessage = message.replace(POSITIONALS_EXP, function (match, isEscaped, _, flag) {\n    var positional = positionals[positionalIndex];\n    var value = serializePositional(positional, flag);\n\n    if (!isEscaped) {\n      positionalIndex++;\n      return value;\n    }\n\n    return match;\n  }); // Append unresolved positionals to string as-is.\n\n  if (positionalIndex < positionals.length) {\n    formattedMessage += \" \" + positionals.slice(positionalIndex).join(' ');\n  }\n\n  formattedMessage = formattedMessage.replace(/%{2,2}/g, '%');\n  return formattedMessage;\n}\n\nformat$1.format = format;\n\nvar __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __spreadArray = commonjsGlobal && commonjsGlobal.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n};\n\nObject.defineProperty(invariant$1, \"__esModule\", {\n  value: true\n});\ninvariant$1.invariant = invariant$1.InvariantError = void 0;\nvar format_1 = format$1;\nvar STACK_FRAMES_TO_IGNORE = 2;\n\nvar InvariantError =\n/** @class */\nfunction (_super) {\n  __extends(InvariantError, _super);\n\n  function InvariantError(message) {\n    var positionals = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      positionals[_i - 1] = arguments[_i];\n    }\n\n    var _this = _super.call(this, message) || this;\n\n    _this.name = 'Invariant Violation';\n    _this.message = format_1.format.apply(void 0, __spreadArray([message], positionals));\n\n    if (_this.stack) {\n      var prevStack = _this.stack;\n      _this.stack = prevStack.split('\\n').slice(STACK_FRAMES_TO_IGNORE).join('\\n');\n    }\n\n    return _this;\n  }\n\n  return InvariantError;\n}(Error);\n\ninvariant$1.InvariantError = InvariantError;\n\nfunction invariant(predicate, message) {\n  var positionals = [];\n\n  for (var _i = 2; _i < arguments.length; _i++) {\n    positionals[_i - 2] = arguments[_i];\n  }\n\n  if (!predicate) {\n    throw new (InvariantError.bind.apply(InvariantError, __spreadArray([void 0, message], positionals)))();\n  }\n}\n\ninvariant$1.invariant = invariant;\n\n(function (exports) {\n  var __createBinding = commonjsGlobal && commonjsGlobal.__createBinding || (Object.create ? function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    });\n  } : function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n  });\n\n  var __exportStar = commonjsGlobal && commonjsGlobal.__exportStar || function (m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n  };\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  __exportStar(invariant$1, exports);\n\n  __exportStar(format$1, exports);\n})(lib);\n\nconst LIBRARY_PREFIX = '[MSW]';\n/**\r\n * Formats a given message by appending the library's prefix string.\r\n */\n\nfunction formatMessage(message, ...positionals) {\n  const interpolatedMessage = lib.format(message, ...positionals);\n  return `${LIBRARY_PREFIX} ${interpolatedMessage}`;\n}\n/**\r\n * Prints a library-specific warning.\r\n */\n\n\nfunction warn(message, ...positionals) {\n  console.warn(formatMessage(message, ...positionals));\n}\n/**\r\n * Prints a library-specific error.\r\n */\n\n\nfunction error(message, ...positionals) {\n  console.error(formatMessage(message, ...positionals));\n}\n\nconst devUtils = {\n  formatMessage,\n  warn,\n  error\n};\n\nclass NetworkError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = 'NetworkError';\n  }\n\n}\n\nfunction parseContentHeaders(headersString) {\n  var _a, _b;\n\n  const headers = lib$1.stringToHeaders(headersString);\n  const contentType = headers.get('content-type') || 'text/plain';\n  const disposition = headers.get('content-disposition');\n\n  if (!disposition) {\n    throw new Error('\"Content-Disposition\" header is required.');\n  }\n\n  const directives = disposition.split(';').reduce((acc, chunk) => {\n    const [name, ...rest] = chunk.trim().split('=');\n    acc[name] = rest.join('=');\n    return acc;\n  }, {});\n  const name = (_a = directives.name) === null || _a === void 0 ? void 0 : _a.slice(1, -1);\n  const filename = (_b = directives.filename) === null || _b === void 0 ? void 0 : _b.slice(1, -1);\n  return {\n    name,\n    filename,\n    contentType\n  };\n}\n/**\r\n * Parses a given string as a multipart/form-data.\r\n * Does not throw an exception on an invalid multipart string.\r\n */\n\n\nfunction parseMultipartData(data, headers) {\n  const contentType = headers === null || headers === void 0 ? void 0 : headers.get('content-type');\n\n  if (!contentType) {\n    return undefined;\n  }\n\n  const [, ...directives] = contentType.split(/; */);\n  const boundary = directives.filter(d => d.startsWith('boundary=')).map(s => s.replace(/^boundary=/, ''))[0];\n\n  if (!boundary) {\n    return undefined;\n  }\n\n  const boundaryRegExp = new RegExp(`--+${boundary}`);\n  const fields = data.split(boundaryRegExp).filter(chunk => chunk.startsWith('\\r\\n') && chunk.endsWith('\\r\\n')).map(chunk => chunk.trimStart().replace(/\\r\\n$/, ''));\n\n  if (!fields.length) {\n    return undefined;\n  }\n\n  const parsedBody = {};\n\n  try {\n    for (const field of fields) {\n      const [contentHeaders, ...rest] = field.split('\\r\\n\\r\\n');\n      const contentBody = rest.join('\\r\\n\\r\\n');\n      const {\n        contentType,\n        filename,\n        name\n      } = parseContentHeaders(contentHeaders);\n      const value = filename === undefined ? contentBody : new File([contentBody], filename, {\n        type: contentType\n      });\n      const parsedValue = parsedBody[name];\n\n      if (parsedValue === undefined) {\n        parsedBody[name] = value;\n      } else if (Array.isArray(parsedValue)) {\n        parsedBody[name] = [...parsedValue, value];\n      } else {\n        parsedBody[name] = [parsedValue, value];\n      }\n    }\n\n    return parsedBody;\n  } catch (error) {\n    return undefined;\n  }\n}\n/**\r\n * Parses a given request/response body based on the `Content-Type` header.\r\n */\n\n\nfunction parseBody(body, headers) {\n  // Return whatever falsey body value is given.\n  if (!body) {\n    return body;\n  }\n\n  const contentType = headers === null || headers === void 0 ? void 0 : headers.get('content-type'); // If the body has a Multipart Content-Type\n  // parse it into an object.\n\n  const hasMultipartContent = contentType === null || contentType === void 0 ? void 0 : contentType.startsWith('multipart/form-data');\n\n  if (hasMultipartContent && typeof body !== 'object') {\n    return parseMultipartData(body, headers) || body;\n  } // If the intercepted request's body has a JSON Content-Type\n  // parse it into an object.\n\n\n  const hasJsonContent = contentType === null || contentType === void 0 ? void 0 : contentType.includes('json');\n\n  if (hasJsonContent && typeof body !== 'object') {\n    return jsonParse(body) || body;\n  } // Otherwise leave as-is.\n\n\n  return body;\n}\n/**\r\n * Returns a relative URL if the given request URL is relative to the current origin.\r\n * Otherwise returns an absolute URL.\r\n */\n\n\nconst getPublicUrlFromRequest = request => {\n  return request.referrer.startsWith(request.url.origin) ? request.url.pathname : new URL(request.url.pathname, `${request.url.protocol}//${request.url.host}`).href;\n};\n\nvar StatusCodeColor;\n\n(function (StatusCodeColor) {\n  StatusCodeColor[\"Success\"] = \"#69AB32\";\n  StatusCodeColor[\"Warning\"] = \"#F0BB4B\";\n  StatusCodeColor[\"Danger\"] = \"#E95F5D\";\n})(StatusCodeColor || (StatusCodeColor = {}));\n/**\r\n * Returns a HEX color for a given response status code number.\r\n */\n\n\nfunction getStatusCodeColor(status) {\n  if (status < 300) {\n    return StatusCodeColor.Success;\n  }\n\n  if (status < 400) {\n    return StatusCodeColor.Warning;\n  }\n\n  return StatusCodeColor.Danger;\n}\n/**\r\n * Returns a timestamp string in a \"HH:MM:SS\" format.\r\n */\n\n\nfunction getTimestamp() {\n  const now = new Date();\n  return [now.getHours(), now.getMinutes(), now.getSeconds()].map(String).map(chunk => chunk.slice(0, 2)).map(chunk => chunk.padStart(2, '0')).join(':');\n}\n/**\r\n * Formats a mocked request for introspection in browser's console.\r\n */\n\n\nfunction prepareRequest(request) {\n  return Object.assign(Object.assign({}, request), {\n    headers: request.headers.all()\n  });\n}\n/**\r\n * Formats a mocked response for introspection in the browser's console.\r\n */\n\n\nfunction prepareResponse(res) {\n  const responseHeaders = lib$1.objectToHeaders(res.headers);\n  return Object.assign(Object.assign({}, res), {\n    // Parse a response JSON body for preview in the logs\n    body: parseBody(res.body, responseHeaders)\n  });\n}\n/**\r\n * Converts a string path to a Regular Expression.\r\n * Transforms path parameters into named RegExp groups.\r\n */\n\n\nconst pathToRegExp = path => {\n  const pattern = path // Escape literal dots\n  .replace(/\\./g, '\\\\.') // Escape literal slashes\n  .replace(/\\//g, '/') // Escape literal question marks\n  .replace(/\\?/g, '\\\\?') // Ignore trailing slashes\n  .replace(/\\/+$/, '') // Replace wildcard with any zero-to-any character sequence\n  .replace(/\\*+/g, '.*') // Replace parameters with named capturing groups\n  .replace(/:([^\\d|^\\/][a-zA-Z0-9_]*(?=(?:\\/|\\\\.)|$))/g, (_, paramName) => `(?<${paramName}>[^\\/]+?)`) // Allow optional trailing slash\n  .concat('(\\\\/|$)');\n  return new RegExp(pattern, 'gi');\n};\n/**\r\n * Matches a given url against a path.\r\n */\n\n\nconst match = (path, url) => {\n  const expression = path instanceof RegExp ? path : pathToRegExp(path);\n  const match = expression.exec(url) || false; // Matches in strict mode: match string should equal to input (url)\n  // Otherwise loose matches will be considered truthy:\n  // match('/messages/:id', '/messages/123/users') // true\n\n  const matches = path instanceof RegExp ? !!match : !!match && match[0] === match.input;\n  return {\n    matches,\n    params: match && matches ? match.groups || null : null\n  };\n};\n\nvar getCleanUrl$1 = {};\nObject.defineProperty(getCleanUrl$1, \"__esModule\", {\n  value: true\n});\nvar getCleanUrl_2 = getCleanUrl$1.getCleanUrl = void 0;\n/**\n * Removes query parameters and hashes from a given URL.\n */\n\nfunction getCleanUrl(url, isAbsolute) {\n  if (isAbsolute === void 0) {\n    isAbsolute = true;\n  }\n\n  return [isAbsolute && url.origin, url.pathname].filter(Boolean).join('');\n}\n\ngetCleanUrl_2 = getCleanUrl$1.getCleanUrl = getCleanUrl;\nconst REDUNDANT_CHARACTERS_EXP = /[\\?|#].*$/g;\n\nfunction getSearchParams(path) {\n  return new URL(`/${path}`, 'http://localhost').searchParams;\n}\n/**\r\n * Removes query parameters and hashes from a given URL string.\r\n */\n\n\nfunction cleanUrl(path) {\n  return path.replace(REDUNDANT_CHARACTERS_EXP, '');\n}\n/**\r\n * Returns an absolute URL based on the given path.\r\n */\n\n\nfunction getAbsoluteUrl(path, baseUrl) {\n  // Ignore absolute URLs.\n  if (!path.startsWith('/')) {\n    return path;\n  } // Resolve a relative request URL against a given custom \"baseUrl\"\n  // or the current location (in the case of browser/browser-like environments).\n\n\n  const origin = baseUrl || typeof location !== 'undefined' && location.origin;\n  return origin ? new URL(path, origin).href : path;\n}\n/**\r\n * Normalizes a given request handler path:\r\n * - Preserves RegExp.\r\n * - Removes query parameters and hashes.\r\n * - Rebases relative URLs against the \"baseUrl\" or the current location.\r\n * - Preserves relative URLs in Node.js, unless specified otherwise.\r\n */\n\n\nfunction normalizePath(path, baseUrl) {\n  // RegExp paths do not need normalization.\n  if (path instanceof RegExp) {\n    return path;\n  }\n\n  const maybeAbsoluteUrl = getAbsoluteUrl(path, baseUrl);\n  return cleanUrl(maybeAbsoluteUrl);\n}\n/**\r\n * Returns the result of matching given request URL against a mask.\r\n */\n\n\nfunction matchRequestUrl(url, path, baseUrl) {\n  const normalizedPath = normalizePath(path, baseUrl);\n  return match(normalizedPath, getCleanUrl_2(url));\n}\n/**\r\n * Composes a given list of functions into a new function that\r\n * executes from right to left.\r\n */\n\n\nfunction compose(...fns) {\n  return (...args) => {\n    return fns.reduceRight((leftFn, rightFn) => {\n      return leftFn instanceof Promise ? Promise.resolve(leftFn).then(rightFn) : rightFn(leftFn);\n    }, args[0]);\n  };\n}\n\nconst defaultResponse = {\n  status: 200,\n  statusText: 'OK',\n  body: null,\n  delay: 0,\n  once: false\n};\nconst defaultResponseTransformers = [];\n\nfunction createResponseComposition(responseOverrides, defaultTransformers = defaultResponseTransformers) {\n  return (...transformers) => __awaiter(this, void 0, void 0, function* () {\n    const initialResponse = Object.assign({}, defaultResponse, {\n      headers: new lib$1.Headers({\n        'x-powered-by': 'msw'\n      })\n    }, responseOverrides);\n    const resolvedTransformers = [...defaultTransformers, ...transformers].filter(Boolean);\n    const resolvedResponse = resolvedTransformers.length > 0 ? compose(...resolvedTransformers)(initialResponse) : initialResponse;\n    return resolvedResponse;\n  });\n}\n\nconst response = Object.assign(createResponseComposition(), {\n  once: createResponseComposition({\n    once: true\n  }),\n\n  networkError(message) {\n    throw new NetworkError(message);\n  }\n\n});\n/**\r\n * Return the stack trace frame of a function's invocation.\r\n */\n\nfunction getCallFrame() {\n  // In <IE11, new Error may return an undefined stack\n  const stack = new Error().stack || '';\n  const frames = stack.split('\\n'); // Get the first frame that doesn't reference the library's internal trace.\n  // Assume that frame is the invocation frame.\n\n  const ignoreFrameRegExp = /(node_modules)?[\\/\\\\]lib[\\/\\\\](umd|esm|iief|cjs)[\\/\\\\]|^[^\\/\\\\]*$/;\n  const declarationFrame = frames.slice(1).find(frame => {\n    return !ignoreFrameRegExp.test(frame);\n  });\n\n  if (!declarationFrame) {\n    return;\n  } // Extract file reference from the stack frame.\n\n\n  const declarationPath = declarationFrame.replace(/\\s*at [^()]*\\(([^)]+)\\)/, '$1').replace(/^@/, '');\n  return declarationPath;\n}\n/**\r\n * Determines if the given function is an iterator.\r\n */\n\n\nfunction isIterable(fn) {\n  if (!fn) {\n    return false;\n  }\n\n  return typeof fn[Symbol.iterator] == 'function';\n}\n\nconst defaultContext = {\n  status,\n  set,\n  delay,\n  fetch\n};\n\nclass RequestHandler {\n  constructor(options) {\n    this.shouldSkip = false;\n    this.ctx = options.ctx || defaultContext;\n    this.resolver = options.resolver;\n    const callFrame = getCallFrame();\n    this.info = Object.assign(Object.assign({}, options.info), {\n      callFrame\n    });\n  }\n  /**\r\n   * Parse the captured request to extract additional information from it.\r\n   * Parsed result is then exposed to other methods of this request handler.\r\n   */\n\n\n  parse(_request, _resolutionContext) {\n    return null;\n  }\n  /**\r\n   * Test if this handler matches the given request.\r\n   */\n\n\n  test(request, resolutionContext) {\n    return this.predicate(request, this.parse(request, resolutionContext), resolutionContext);\n  }\n  /**\r\n   * Derive the publicly exposed request (`req`) instance of the response resolver\r\n   * from the captured request and its parsed result.\r\n   */\n\n\n  getPublicRequest(request, _parsedResult) {\n    return request;\n  }\n\n  markAsSkipped(shouldSkip = true) {\n    this.shouldSkip = shouldSkip;\n  }\n  /**\r\n   * Execute this request handler and produce a mocked response\r\n   * using the given resolver function.\r\n   */\n\n\n  run(request, resolutionContext) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (this.shouldSkip) {\n        return null;\n      }\n\n      const parsedResult = this.parse(request, resolutionContext);\n      const shouldIntercept = this.predicate(request, parsedResult, resolutionContext);\n\n      if (!shouldIntercept) {\n        return null;\n      }\n\n      const publicRequest = this.getPublicRequest(request, parsedResult); // Create a response extraction wrapper around the resolver\n      // since it can be both an async function and a generator.\n\n      const executeResolver = this.wrapResolver(this.resolver);\n      const mockedResponse = yield executeResolver(publicRequest, response, this.ctx);\n      return this.createExecutionResult(parsedResult, publicRequest, mockedResponse);\n    });\n  }\n\n  wrapResolver(resolver) {\n    return (req, res, ctx) => __awaiter(this, void 0, void 0, function* () {\n      const result = this.resolverGenerator || (yield resolver(req, res, ctx));\n\n      if (isIterable(result)) {\n        const {\n          value,\n          done\n        } = result[Symbol.iterator]().next();\n        const nextResponse = yield value; // If the generator is done and there is no next value,\n        // return the previous generator's value.\n\n        if (!nextResponse && done) {\n          return this.resolverGeneratorResult;\n        }\n\n        if (!this.resolverGenerator) {\n          this.resolverGenerator = result;\n        }\n\n        this.resolverGeneratorResult = nextResponse;\n        return nextResponse;\n      }\n\n      return result;\n    });\n  }\n\n  createExecutionResult(parsedResult, request, response) {\n    return {\n      handler: this,\n      parsedResult: parsedResult || null,\n      request,\n      response: response || null\n    };\n  }\n\n}\n\nexport { NetworkError as N, RequestHandler as R, __awaiter as _, getCleanUrl$1 as a, defaultResponse as b, createResponseComposition as c, devUtils as d, defaultContext as e, compose as f, getPublicUrlFromRequest as g, cleanUrl as h, getSearchParams as i, prepareRequest as j, prepareResponse as k, lib as l, matchRequestUrl as m, getStatusCodeColor as n, getTimestamp as o, parseBody as p, __rest as q, response as r };","map":{"version":3,"sources":["/Users/selamhabteab/Desktop/Projects/redux/community-board/node_modules/msw/lib/esm/RequestHandler-deps.js"],"names":["c","commonjsGlobal","l","lib$1","j","jsonParse","s","status","b","set","e","delay","f","fetch","__rest","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","apply","lib","invariant$1","format$1","defineProperty","format","POSITIONALS_EXP","serializePositional","positional","flag","Number","JSON","stringify","json","test","message","positionals","_i","arguments","positionalIndex","formattedMessage","replace","match","isEscaped","_","slice","join","__extends","extendStatics","d","setPrototypeOf","__proto__","Array","TypeError","String","__","constructor","create","__spreadArray","to","from","il","invariant","InvariantError","format_1","STACK_FRAMES_TO_IGNORE","_super","_this","name","stack","prevStack","split","Error","predicate","bind","exports","__createBinding","o","m","k","k2","undefined","enumerable","get","__exportStar","LIBRARY_PREFIX","formatMessage","interpolatedMessage","warn","console","error","devUtils","NetworkError","parseContentHeaders","headersString","_a","_b","headers","stringToHeaders","contentType","disposition","directives","reduce","acc","chunk","rest","trim","filename","parseMultipartData","data","boundary","filter","startsWith","map","boundaryRegExp","RegExp","fields","endsWith","trimStart","parsedBody","field","contentHeaders","contentBody","File","type","parsedValue","isArray","parseBody","body","hasMultipartContent","hasJsonContent","includes","getPublicUrlFromRequest","request","referrer","url","origin","pathname","URL","protocol","host","href","StatusCodeColor","getStatusCodeColor","Success","Warning","Danger","getTimestamp","now","Date","getHours","getMinutes","getSeconds","padStart","prepareRequest","assign","all","prepareResponse","res","responseHeaders","objectToHeaders","pathToRegExp","path","pattern","paramName","concat","expression","exec","matches","input","params","groups","getCleanUrl$1","getCleanUrl_2","getCleanUrl","isAbsolute","Boolean","REDUNDANT_CHARACTERS_EXP","getSearchParams","searchParams","cleanUrl","getAbsoluteUrl","baseUrl","location","normalizePath","maybeAbsoluteUrl","matchRequestUrl","normalizedPath","compose","fns","args","reduceRight","leftFn","rightFn","defaultResponse","statusText","once","defaultResponseTransformers","createResponseComposition","responseOverrides","defaultTransformers","transformers","initialResponse","Headers","resolvedTransformers","resolvedResponse","response","networkError","getCallFrame","frames","ignoreFrameRegExp","declarationFrame","find","frame","declarationPath","isIterable","fn","Symbol","iterator","defaultContext","RequestHandler","options","shouldSkip","ctx","resolver","callFrame","info","parse","_request","_resolutionContext","resolutionContext","getPublicRequest","_parsedResult","markAsSkipped","run","parsedResult","shouldIntercept","publicRequest","executeResolver","wrapResolver","mockedResponse","createExecutionResult","req","resolverGenerator","nextResponse","resolverGeneratorResult","handler","N","R","a","g","h","n","q","r"],"mappings":"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","sourcesContent":["import { c as commonjsGlobal, l as lib$1, j as jsonParse, s as status, b as set, e as delay, f as fetch } from './fetch-deps.js';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nvar lib = {};\n\nvar invariant$1 = {};\n\nvar format$1 = {};\n\nObject.defineProperty(format$1, \"__esModule\", { value: true });\nformat$1.format = void 0;\nvar POSITIONALS_EXP = /(%?)(%([sdjo]))/g;\nfunction serializePositional(positional, flag) {\n    switch (flag) {\n        // Strings.\n        case 's':\n            return positional;\n        // Digits.\n        case 'd':\n        case 'i':\n            return Number(positional);\n        // JSON.\n        case 'j':\n            return JSON.stringify(positional);\n        // Objects.\n        case 'o': {\n            // Preserve stings to prevent extra quotes around them.\n            if (typeof positional === 'string') {\n                return positional;\n            }\n            var json = JSON.stringify(positional);\n            // If the positional isn't serializable, return it as-is.\n            if (json === '{}' || json === '[]' || /^\\[object .+?\\]$/.test(json)) {\n                return positional;\n            }\n            return json;\n        }\n    }\n}\nfunction format(message) {\n    var positionals = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        positionals[_i - 1] = arguments[_i];\n    }\n    if (positionals.length === 0) {\n        return message;\n    }\n    var positionalIndex = 0;\n    var formattedMessage = message.replace(POSITIONALS_EXP, function (match, isEscaped, _, flag) {\n        var positional = positionals[positionalIndex];\n        var value = serializePositional(positional, flag);\n        if (!isEscaped) {\n            positionalIndex++;\n            return value;\n        }\n        return match;\n    });\n    // Append unresolved positionals to string as-is.\n    if (positionalIndex < positionals.length) {\n        formattedMessage += \" \" + positionals.slice(positionalIndex).join(' ');\n    }\n    formattedMessage = formattedMessage.replace(/%{2,2}/g, '%');\n    return formattedMessage;\n}\nformat$1.format = format;\n\nvar __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (commonjsGlobal && commonjsGlobal.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(invariant$1, \"__esModule\", { value: true });\ninvariant$1.invariant = invariant$1.InvariantError = void 0;\nvar format_1 = format$1;\nvar STACK_FRAMES_TO_IGNORE = 2;\nvar InvariantError = /** @class */ (function (_super) {\n    __extends(InvariantError, _super);\n    function InvariantError(message) {\n        var positionals = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            positionals[_i - 1] = arguments[_i];\n        }\n        var _this = _super.call(this, message) || this;\n        _this.name = 'Invariant Violation';\n        _this.message = format_1.format.apply(void 0, __spreadArray([message], positionals));\n        if (_this.stack) {\n            var prevStack = _this.stack;\n            _this.stack = prevStack\n                .split('\\n')\n                .slice(STACK_FRAMES_TO_IGNORE)\n                .join('\\n');\n        }\n        return _this;\n    }\n    return InvariantError;\n}(Error));\ninvariant$1.InvariantError = InvariantError;\nfunction invariant(predicate, message) {\n    var positionals = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        positionals[_i - 2] = arguments[_i];\n    }\n    if (!predicate) {\n        throw new (InvariantError.bind.apply(InvariantError, __spreadArray([void 0, message], positionals)))();\n    }\n}\ninvariant$1.invariant = invariant;\n\n(function (exports) {\nvar __createBinding = (commonjsGlobal && commonjsGlobal.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (commonjsGlobal && commonjsGlobal.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(invariant$1, exports);\n__exportStar(format$1, exports);\n}(lib));\n\nconst LIBRARY_PREFIX = '[MSW]';\r\n/**\r\n * Formats a given message by appending the library's prefix string.\r\n */\r\nfunction formatMessage(message, ...positionals) {\r\n    const interpolatedMessage = lib.format(message, ...positionals);\r\n    return `${LIBRARY_PREFIX} ${interpolatedMessage}`;\r\n}\r\n/**\r\n * Prints a library-specific warning.\r\n */\r\nfunction warn(message, ...positionals) {\r\n    console.warn(formatMessage(message, ...positionals));\r\n}\r\n/**\r\n * Prints a library-specific error.\r\n */\r\nfunction error(message, ...positionals) {\r\n    console.error(formatMessage(message, ...positionals));\r\n}\r\nconst devUtils = {\r\n    formatMessage,\r\n    warn,\r\n    error,\r\n};\n\nclass NetworkError extends Error {\r\n    constructor(message) {\r\n        super(message);\r\n        this.name = 'NetworkError';\r\n    }\r\n}\n\nfunction parseContentHeaders(headersString) {\r\n    var _a, _b;\r\n    const headers = lib$1.stringToHeaders(headersString);\r\n    const contentType = headers.get('content-type') || 'text/plain';\r\n    const disposition = headers.get('content-disposition');\r\n    if (!disposition) {\r\n        throw new Error('\"Content-Disposition\" header is required.');\r\n    }\r\n    const directives = disposition.split(';').reduce((acc, chunk) => {\r\n        const [name, ...rest] = chunk.trim().split('=');\r\n        acc[name] = rest.join('=');\r\n        return acc;\r\n    }, {});\r\n    const name = (_a = directives.name) === null || _a === void 0 ? void 0 : _a.slice(1, -1);\r\n    const filename = (_b = directives.filename) === null || _b === void 0 ? void 0 : _b.slice(1, -1);\r\n    return {\r\n        name,\r\n        filename,\r\n        contentType,\r\n    };\r\n}\r\n/**\r\n * Parses a given string as a multipart/form-data.\r\n * Does not throw an exception on an invalid multipart string.\r\n */\r\nfunction parseMultipartData(data, headers) {\r\n    const contentType = headers === null || headers === void 0 ? void 0 : headers.get('content-type');\r\n    if (!contentType) {\r\n        return undefined;\r\n    }\r\n    const [, ...directives] = contentType.split(/; */);\r\n    const boundary = directives\r\n        .filter((d) => d.startsWith('boundary='))\r\n        .map((s) => s.replace(/^boundary=/, ''))[0];\r\n    if (!boundary) {\r\n        return undefined;\r\n    }\r\n    const boundaryRegExp = new RegExp(`--+${boundary}`);\r\n    const fields = data\r\n        .split(boundaryRegExp)\r\n        .filter((chunk) => chunk.startsWith('\\r\\n') && chunk.endsWith('\\r\\n'))\r\n        .map((chunk) => chunk.trimStart().replace(/\\r\\n$/, ''));\r\n    if (!fields.length) {\r\n        return undefined;\r\n    }\r\n    const parsedBody = {};\r\n    try {\r\n        for (const field of fields) {\r\n            const [contentHeaders, ...rest] = field.split('\\r\\n\\r\\n');\r\n            const contentBody = rest.join('\\r\\n\\r\\n');\r\n            const { contentType, filename, name } = parseContentHeaders(contentHeaders);\r\n            const value = filename === undefined\r\n                ? contentBody\r\n                : new File([contentBody], filename, { type: contentType });\r\n            const parsedValue = parsedBody[name];\r\n            if (parsedValue === undefined) {\r\n                parsedBody[name] = value;\r\n            }\r\n            else if (Array.isArray(parsedValue)) {\r\n                parsedBody[name] = [...parsedValue, value];\r\n            }\r\n            else {\r\n                parsedBody[name] = [parsedValue, value];\r\n            }\r\n        }\r\n        return parsedBody;\r\n    }\r\n    catch (error) {\r\n        return undefined;\r\n    }\r\n}\n\n/**\r\n * Parses a given request/response body based on the `Content-Type` header.\r\n */\r\nfunction parseBody(body, headers) {\r\n    // Return whatever falsey body value is given.\r\n    if (!body) {\r\n        return body;\r\n    }\r\n    const contentType = headers === null || headers === void 0 ? void 0 : headers.get('content-type');\r\n    // If the body has a Multipart Content-Type\r\n    // parse it into an object.\r\n    const hasMultipartContent = contentType === null || contentType === void 0 ? void 0 : contentType.startsWith('multipart/form-data');\r\n    if (hasMultipartContent && typeof body !== 'object') {\r\n        return parseMultipartData(body, headers) || body;\r\n    }\r\n    // If the intercepted request's body has a JSON Content-Type\r\n    // parse it into an object.\r\n    const hasJsonContent = contentType === null || contentType === void 0 ? void 0 : contentType.includes('json');\r\n    if (hasJsonContent && typeof body !== 'object') {\r\n        return jsonParse(body) || body;\r\n    }\r\n    // Otherwise leave as-is.\r\n    return body;\r\n}\n\n/**\r\n * Returns a relative URL if the given request URL is relative to the current origin.\r\n * Otherwise returns an absolute URL.\r\n */\r\nconst getPublicUrlFromRequest = (request) => {\r\n    return request.referrer.startsWith(request.url.origin)\r\n        ? request.url.pathname\r\n        : new URL(request.url.pathname, `${request.url.protocol}//${request.url.host}`).href;\r\n};\n\nvar StatusCodeColor;\r\n(function (StatusCodeColor) {\r\n    StatusCodeColor[\"Success\"] = \"#69AB32\";\r\n    StatusCodeColor[\"Warning\"] = \"#F0BB4B\";\r\n    StatusCodeColor[\"Danger\"] = \"#E95F5D\";\r\n})(StatusCodeColor || (StatusCodeColor = {}));\r\n/**\r\n * Returns a HEX color for a given response status code number.\r\n */\r\nfunction getStatusCodeColor(status) {\r\n    if (status < 300) {\r\n        return StatusCodeColor.Success;\r\n    }\r\n    if (status < 400) {\r\n        return StatusCodeColor.Warning;\r\n    }\r\n    return StatusCodeColor.Danger;\r\n}\n\n/**\r\n * Returns a timestamp string in a \"HH:MM:SS\" format.\r\n */\r\nfunction getTimestamp() {\r\n    const now = new Date();\r\n    return [now.getHours(), now.getMinutes(), now.getSeconds()]\r\n        .map(String)\r\n        .map((chunk) => chunk.slice(0, 2))\r\n        .map((chunk) => chunk.padStart(2, '0'))\r\n        .join(':');\r\n}\n\n/**\r\n * Formats a mocked request for introspection in browser's console.\r\n */\r\nfunction prepareRequest(request) {\r\n    return Object.assign(Object.assign({}, request), { headers: request.headers.all() });\r\n}\n\n/**\r\n * Formats a mocked response for introspection in the browser's console.\r\n */\r\nfunction prepareResponse(res) {\r\n    const responseHeaders = lib$1.objectToHeaders(res.headers);\r\n    return Object.assign(Object.assign({}, res), { \r\n        // Parse a response JSON body for preview in the logs\r\n        body: parseBody(res.body, responseHeaders) });\r\n}\n\n/**\r\n * Converts a string path to a Regular Expression.\r\n * Transforms path parameters into named RegExp groups.\r\n */\r\nconst pathToRegExp = (path) => {\r\n    const pattern = path\r\n        // Escape literal dots\r\n        .replace(/\\./g, '\\\\.')\r\n        // Escape literal slashes\r\n        .replace(/\\//g, '/')\r\n        // Escape literal question marks\r\n        .replace(/\\?/g, '\\\\?')\r\n        // Ignore trailing slashes\r\n        .replace(/\\/+$/, '')\r\n        // Replace wildcard with any zero-to-any character sequence\r\n        .replace(/\\*+/g, '.*')\r\n        // Replace parameters with named capturing groups\r\n        .replace(/:([^\\d|^\\/][a-zA-Z0-9_]*(?=(?:\\/|\\\\.)|$))/g, (_, paramName) => `(?<${paramName}>[^\\/]+?)`)\r\n        // Allow optional trailing slash\r\n        .concat('(\\\\/|$)');\r\n    return new RegExp(pattern, 'gi');\r\n};\n\n/**\r\n * Matches a given url against a path.\r\n */\r\nconst match = (path, url) => {\r\n    const expression = path instanceof RegExp ? path : pathToRegExp(path);\r\n    const match = expression.exec(url) || false;\r\n    // Matches in strict mode: match string should equal to input (url)\r\n    // Otherwise loose matches will be considered truthy:\r\n    // match('/messages/:id', '/messages/123/users') // true\r\n    const matches = path instanceof RegExp ? !!match : !!match && match[0] === match.input;\r\n    return {\r\n        matches,\r\n        params: match && matches ? match.groups || null : null,\r\n    };\r\n};\n\nvar getCleanUrl$1 = {};\n\nObject.defineProperty(getCleanUrl$1, \"__esModule\", { value: true });\nvar getCleanUrl_2 = getCleanUrl$1.getCleanUrl = void 0;\n/**\n * Removes query parameters and hashes from a given URL.\n */\nfunction getCleanUrl(url, isAbsolute) {\n    if (isAbsolute === void 0) { isAbsolute = true; }\n    return [isAbsolute && url.origin, url.pathname].filter(Boolean).join('');\n}\ngetCleanUrl_2 = getCleanUrl$1.getCleanUrl = getCleanUrl;\n\nconst REDUNDANT_CHARACTERS_EXP = /[\\?|#].*$/g;\r\nfunction getSearchParams(path) {\r\n    return new URL(`/${path}`, 'http://localhost').searchParams;\r\n}\r\n/**\r\n * Removes query parameters and hashes from a given URL string.\r\n */\r\nfunction cleanUrl(path) {\r\n    return path.replace(REDUNDANT_CHARACTERS_EXP, '');\r\n}\n\n/**\r\n * Returns an absolute URL based on the given path.\r\n */\r\nfunction getAbsoluteUrl(path, baseUrl) {\r\n    // Ignore absolute URLs.\r\n    if (!path.startsWith('/')) {\r\n        return path;\r\n    }\r\n    // Resolve a relative request URL against a given custom \"baseUrl\"\r\n    // or the current location (in the case of browser/browser-like environments).\r\n    const origin = baseUrl || (typeof location !== 'undefined' && location.origin);\r\n    return origin ? new URL(path, origin).href : path;\r\n}\n\n/**\r\n * Normalizes a given request handler path:\r\n * - Preserves RegExp.\r\n * - Removes query parameters and hashes.\r\n * - Rebases relative URLs against the \"baseUrl\" or the current location.\r\n * - Preserves relative URLs in Node.js, unless specified otherwise.\r\n */\r\nfunction normalizePath(path, baseUrl) {\r\n    // RegExp paths do not need normalization.\r\n    if (path instanceof RegExp) {\r\n        return path;\r\n    }\r\n    const maybeAbsoluteUrl = getAbsoluteUrl(path, baseUrl);\r\n    return cleanUrl(maybeAbsoluteUrl);\r\n}\n\n/**\r\n * Returns the result of matching given request URL against a mask.\r\n */\r\nfunction matchRequestUrl(url, path, baseUrl) {\r\n    const normalizedPath = normalizePath(path, baseUrl);\r\n    return match(normalizedPath, getCleanUrl_2(url));\r\n}\n\n/**\r\n * Composes a given list of functions into a new function that\r\n * executes from right to left.\r\n */\r\nfunction compose(...fns) {\r\n    return (...args) => {\r\n        return fns.reduceRight((leftFn, rightFn) => {\r\n            return leftFn instanceof Promise\r\n                ? Promise.resolve(leftFn).then(rightFn)\r\n                : rightFn(leftFn);\r\n        }, args[0]);\r\n    };\r\n}\n\nconst defaultResponse = {\r\n    status: 200,\r\n    statusText: 'OK',\r\n    body: null,\r\n    delay: 0,\r\n    once: false,\r\n};\r\nconst defaultResponseTransformers = [];\r\nfunction createResponseComposition(responseOverrides, defaultTransformers = defaultResponseTransformers) {\r\n    return (...transformers) => __awaiter(this, void 0, void 0, function* () {\r\n        const initialResponse = Object.assign({}, defaultResponse, {\r\n            headers: new lib$1.Headers({\r\n                'x-powered-by': 'msw',\r\n            }),\r\n        }, responseOverrides);\r\n        const resolvedTransformers = [\r\n            ...defaultTransformers,\r\n            ...transformers,\r\n        ].filter(Boolean);\r\n        const resolvedResponse = resolvedTransformers.length > 0\r\n            ? compose(...resolvedTransformers)(initialResponse)\r\n            : initialResponse;\r\n        return resolvedResponse;\r\n    });\r\n}\r\nconst response = Object.assign(createResponseComposition(), {\r\n    once: createResponseComposition({ once: true }),\r\n    networkError(message) {\r\n        throw new NetworkError(message);\r\n    },\r\n});\n\n/**\r\n * Return the stack trace frame of a function's invocation.\r\n */\r\nfunction getCallFrame() {\r\n    // In <IE11, new Error may return an undefined stack\r\n    const stack = (new Error().stack || '');\r\n    const frames = stack.split('\\n');\r\n    // Get the first frame that doesn't reference the library's internal trace.\r\n    // Assume that frame is the invocation frame.\r\n    const ignoreFrameRegExp = /(node_modules)?[\\/\\\\]lib[\\/\\\\](umd|esm|iief|cjs)[\\/\\\\]|^[^\\/\\\\]*$/;\r\n    const declarationFrame = frames.slice(1).find((frame) => {\r\n        return !ignoreFrameRegExp.test(frame);\r\n    });\r\n    if (!declarationFrame) {\r\n        return;\r\n    }\r\n    // Extract file reference from the stack frame.\r\n    const declarationPath = declarationFrame\r\n        .replace(/\\s*at [^()]*\\(([^)]+)\\)/, '$1')\r\n        .replace(/^@/, '');\r\n    return declarationPath;\r\n}\n\n/**\r\n * Determines if the given function is an iterator.\r\n */\r\nfunction isIterable(fn) {\r\n    if (!fn) {\r\n        return false;\r\n    }\r\n    return typeof fn[Symbol.iterator] == 'function';\r\n}\n\nconst defaultContext = {\r\n    status,\r\n    set,\r\n    delay,\r\n    fetch,\r\n};\r\nclass RequestHandler {\r\n    constructor(options) {\r\n        this.shouldSkip = false;\r\n        this.ctx = options.ctx || defaultContext;\r\n        this.resolver = options.resolver;\r\n        const callFrame = getCallFrame();\r\n        this.info = Object.assign(Object.assign({}, options.info), { callFrame });\r\n    }\r\n    /**\r\n     * Parse the captured request to extract additional information from it.\r\n     * Parsed result is then exposed to other methods of this request handler.\r\n     */\r\n    parse(_request, _resolutionContext) {\r\n        return null;\r\n    }\r\n    /**\r\n     * Test if this handler matches the given request.\r\n     */\r\n    test(request, resolutionContext) {\r\n        return this.predicate(request, this.parse(request, resolutionContext), resolutionContext);\r\n    }\r\n    /**\r\n     * Derive the publicly exposed request (`req`) instance of the response resolver\r\n     * from the captured request and its parsed result.\r\n     */\r\n    getPublicRequest(request, _parsedResult) {\r\n        return request;\r\n    }\r\n    markAsSkipped(shouldSkip = true) {\r\n        this.shouldSkip = shouldSkip;\r\n    }\r\n    /**\r\n     * Execute this request handler and produce a mocked response\r\n     * using the given resolver function.\r\n     */\r\n    run(request, resolutionContext) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.shouldSkip) {\r\n                return null;\r\n            }\r\n            const parsedResult = this.parse(request, resolutionContext);\r\n            const shouldIntercept = this.predicate(request, parsedResult, resolutionContext);\r\n            if (!shouldIntercept) {\r\n                return null;\r\n            }\r\n            const publicRequest = this.getPublicRequest(request, parsedResult);\r\n            // Create a response extraction wrapper around the resolver\r\n            // since it can be both an async function and a generator.\r\n            const executeResolver = this.wrapResolver(this.resolver);\r\n            const mockedResponse = yield executeResolver(publicRequest, response, this.ctx);\r\n            return this.createExecutionResult(parsedResult, publicRequest, mockedResponse);\r\n        });\r\n    }\r\n    wrapResolver(resolver) {\r\n        return (req, res, ctx) => __awaiter(this, void 0, void 0, function* () {\r\n            const result = this.resolverGenerator || (yield resolver(req, res, ctx));\r\n            if (isIterable(result)) {\r\n                const { value, done } = result[Symbol.iterator]().next();\r\n                const nextResponse = yield value;\r\n                // If the generator is done and there is no next value,\r\n                // return the previous generator's value.\r\n                if (!nextResponse && done) {\r\n                    return this.resolverGeneratorResult;\r\n                }\r\n                if (!this.resolverGenerator) {\r\n                    this.resolverGenerator = result;\r\n                }\r\n                this.resolverGeneratorResult = nextResponse;\r\n                return nextResponse;\r\n            }\r\n            return result;\r\n        });\r\n    }\r\n    createExecutionResult(parsedResult, request, response) {\r\n        return {\r\n            handler: this,\r\n            parsedResult: parsedResult || null,\r\n            request,\r\n            response: response || null,\r\n        };\r\n    }\r\n}\n\nexport { NetworkError as N, RequestHandler as R, __awaiter as _, getCleanUrl$1 as a, defaultResponse as b, createResponseComposition as c, devUtils as d, defaultContext as e, compose as f, getPublicUrlFromRequest as g, cleanUrl as h, getSearchParams as i, prepareRequest as j, prepareResponse as k, lib as l, matchRequestUrl as m, getStatusCodeColor as n, getTimestamp as o, parseBody as p, __rest as q, response as r };\n"]},"metadata":{},"sourceType":"module"}