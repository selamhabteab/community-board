{"ast":null,"code":"\"use strict\";\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nexports.__esModule = true;\nexports.parseModelDefinition = void 0;\n\nvar debug_1 = require(\"debug\");\n\nvar glossary_1 = require(\"../glossary\");\n\nvar invariant_1 = require(\"../utils/invariant\");\n\nvar findPrimaryKey_1 = require(\"../utils/findPrimaryKey\");\n\nvar log = debug_1.debug('parseModelDefinition');\n\nfunction parseModelDefinition(dictionary, modelName, definition) {\n  log(\"parsing model definition for \\\"\" + modelName + \"\\\" entity\", definition);\n  var result = Object.entries(definition).reduce(function (result, _a) {\n    var _b = __read(_a, 2),\n        property = _b[0],\n        valueGetter = _b[1];\n\n    if ('isPrimaryKey' in valueGetter) {\n      invariant_1.invariant(result.primaryKey, \"Failed to parse a model definition for \\\"\" + modelName + \"\\\": cannot have both properties \\\"\" + result.primaryKey + \"\\\" and \\\"\" + property + \"\\\" as a primary key.\");\n      result.primaryKey = property;\n      result.properties.push(property);\n      return result;\n    }\n\n    if ('kind' in valueGetter && [glossary_1.RelationKind.OneOf, glossary_1.RelationKind.ManyOf].includes(valueGetter.kind)) {\n      var relationPrimaryKey = findPrimaryKey_1.findPrimaryKey(dictionary[valueGetter.modelName]);\n      result.relations[property] = {\n        kind: valueGetter.kind,\n        modelName: valueGetter.modelName,\n        unique: valueGetter.unique,\n        primaryKey: relationPrimaryKey\n      };\n      return result;\n    }\n\n    result.properties.push(property);\n    return result;\n  }, {\n    primaryKey: undefined,\n    properties: [],\n    relations: {}\n  });\n\n  if (!result.primaryKey) {\n    throw new Error(\"Failed to parse a model definition for \\\"\" + modelName + \"\\\": no provided properties are marked as a primary key (\" + result.properties.join(', ') + \").\");\n  }\n\n  return result;\n}\n\nexports.parseModelDefinition = parseModelDefinition;","map":{"version":3,"sources":["/Users/selamhabteab/Desktop/Projects/redux/redux-essentials-example-app/node_modules/@mswjs/data/lib/model/parseModelDefinition.js"],"names":["__read","o","n","m","Symbol","iterator","i","call","r","ar","e","next","done","push","value","error","exports","__esModule","parseModelDefinition","debug_1","require","glossary_1","invariant_1","findPrimaryKey_1","log","debug","dictionary","modelName","definition","result","Object","entries","reduce","_a","_b","property","valueGetter","invariant","primaryKey","properties","RelationKind","OneOf","ManyOf","includes","kind","relationPrimaryKey","findPrimaryKey","relations","unique","undefined","Error","join"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.parseModelDefinition = void 0;\nvar debug_1 = require(\"debug\");\nvar glossary_1 = require(\"../glossary\");\nvar invariant_1 = require(\"../utils/invariant\");\nvar findPrimaryKey_1 = require(\"../utils/findPrimaryKey\");\nvar log = debug_1.debug('parseModelDefinition');\nfunction parseModelDefinition(dictionary, modelName, definition) {\n    log(\"parsing model definition for \\\"\" + modelName + \"\\\" entity\", definition);\n    var result = Object.entries(definition).reduce(function (result, _a) {\n        var _b = __read(_a, 2), property = _b[0], valueGetter = _b[1];\n        if ('isPrimaryKey' in valueGetter) {\n            invariant_1.invariant(result.primaryKey, \"Failed to parse a model definition for \\\"\" + modelName + \"\\\": cannot have both properties \\\"\" + result.primaryKey + \"\\\" and \\\"\" + property + \"\\\" as a primary key.\");\n            result.primaryKey = property;\n            result.properties.push(property);\n            return result;\n        }\n        if ('kind' in valueGetter &&\n            [glossary_1.RelationKind.OneOf, glossary_1.RelationKind.ManyOf].includes(valueGetter.kind)) {\n            var relationPrimaryKey = findPrimaryKey_1.findPrimaryKey(dictionary[valueGetter.modelName]);\n            result.relations[property] = {\n                kind: valueGetter.kind,\n                modelName: valueGetter.modelName,\n                unique: valueGetter.unique,\n                primaryKey: relationPrimaryKey\n            };\n            return result;\n        }\n        result.properties.push(property);\n        return result;\n    }, {\n        primaryKey: undefined,\n        properties: [],\n        relations: {}\n    });\n    if (!result.primaryKey) {\n        throw new Error(\"Failed to parse a model definition for \\\"\" + modelName + \"\\\": no provided properties are marked as a primary key (\" + result.properties.join(', ') + \").\");\n    }\n    return result;\n}\nexports.parseModelDefinition = parseModelDefinition;\n"]},"metadata":{},"sourceType":"script"}